<?xml version="1.0"?><api><query><pages><page pageid="1120214" ns="0" title="Cloop"><revisions><rev xml:space="preserve">{{lowercase}}
{{Infobox software
| name                   = cloop
| title                  = cloop
| logo                   = &lt;!-- [[File: ]] --&gt;
| screenshot             = &lt;!-- [[File: ]] --&gt;
| caption                = 
| collapsible            = 
| author                 = [[Rusty Russell]]
| developer              = [[Klaus Knopper]]
| released               = &lt;!-- {{Start date|YYYY|MM|DD|df=yes/no}} --&gt;
| discontinued           = 
| latest release version = 2.637-1
| latest release date    = {{Start date and age|2011|01|12|df=yes/no}}
| latest preview version = 
| latest preview date    = &lt;!-- {{Start date and age|YYYY|MM|DD|df=yes/no}} --&gt;
| frequently updated     = &lt;!-- DO NOT include this parameter unless you know what it does --&gt;
| programming language   = 
| operating system       = 
| platform               = 
| size                   = 338K
| language               = 
| status                 = 
| genre                  = [[Loadable kernel module]]
| license                = 
| website                = {{URL|http://www.knoppix.net/wiki/Cloop}}
}}
The '''compressed loopback device''' or '''cloop''' is a [[Loadable kernel module|module]] for the [[Linux kernel]].  It adds support for transparently decompressed, read-only block devices. It is not a compressed [[file system]] in itself.

It was originally written for the [[Levanta]] Bootable Business Card by [[Rusty Russell]], but is now maintained by [[Klaus Knopper]], the author of [[Knoppix]].  cloop is mostly used as a convenient way to compress conventional file systems onto [[Live CD]]s.

A compression ratio of about 2.5:1 is common for software. The Knoppix cloop image, for example, is 700MB compressed and around 1.8GB uncompressed.

== Design ==

cloop images contain:
* A [[shell script]] (with mount commands for the image)
* A header with the number of blocks and the uncompressed block size
* A seek index with compressed and uncompressed block sizes in pairs
* [[zlib]]-compressed data blocks, packed end-to-end

The data blocks are compressed separately; this makes it possible to seek to individual blocks without having to decompress the entire image from the start, but at the cost of slightly reducing the compression ratio.  Live CD images typically use a block size of 256k as a compromise between decompression speed and space-efficiency.

Apple uses a similar file format in the compressed variant of its [[.dmg|DMG]] disk images.

== Limitations ==

The design of the cloop driver requires that compressed blocks be read whole from disk.  This naturally makes cloop access slower when there are many scattered reads, which can happen if the system is low on memory or when a large program with many shared libraries is starting up. A big issue is of course the seek time for CD-ROM drives (~80 ms), which exceeds that of hard disks (~10 ms) by a large factor. On the other hand, because files are packed together, reading a compressed block may thus bring in more than one file into the cache. The effects of tail packing are known to improve seek times (cf. [[reiserfs]], [[btrfs]]), especially for small files. Some performance tests related to cloop have been conducted.&lt;ref&gt;{{Citation
 | title = Cloop performance testing on a ThinkPad T61
 | url = http://www-etud.iro.umontreal.ca/~jaegerch/div/cloop_performance_tests}}&lt;/ref&gt;

== See also ==
* [[Cramfs]]
* [[SquashFS]]
* [[e2compr]]

== References ==
{{reflist}}

== External links ==
*cloop [http://debian-knoppix.alioth.debian.org/packages/cloop/ sources] against the mainline Linux kernels. Note: versions 0.xx are for kernel 2.2; 1.xx are for kernel 2.4; 2.xx are for kernel 2.4 and 2.6.
*[http://www.knoppix.net/wiki/Cloop cloop at Knoppix Linux Wiki] (installation instructions are here)
*Slides from a LinuxTag [http://www.knopper.net/knoppix-info/cloop-chlt4-screen.pdf presentation] by Klaus Knopper on the implementation of cloop (in German).

[[Category:Knoppix]]
[[Category:Compression file systems]]
[[Category:Third-party Linux kernel modules]]


{{linux-stub}}

[[de:Cloop]]
[[ru:Cloop]]</rev></revisions></page></pages></query></api>
