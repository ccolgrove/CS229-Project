<?xml version="1.0"?><api><query><pages><page pageid="438425" ns="0" title="Logical volume management"><revisions><rev xml:space="preserve">In [[computer storage]], '''logical volume management''' or '''LVM''' provides a method of allocating space on [[mass storage | mass-storage]] devices that is more flexible than conventional [[partition (computing)|partitioning]] schemes.  In particular, a volume manager can concatenate, [[Data striping|stripe]] together or otherwise combine partitions into larger virtual ones that administrators can re-size or move, potentially without interrupting system use.  

Volume management represents just one of many forms of [[Storage Virtualization|storage virtualization]]; its implementation takes place in a layer in the [[device driver | device-driver]] stack of an [[operating system | OS]] (as opposed to within storage devices or in a network).

== Design == 
[[Image:LVM1.svg|frame|Linux Logical Volume Manager (LVM) v1]]

Most volume-manager implementations share the same basic design. They start with '''physical volumes''' (PVs), which can be either [[hard disk]]s, hard disk [[partition (computing)|partition]]s, or [[Logical Unit Number|Logical Unit Numbers (LUNs)]] of an external storage device. Volume management treats PVs as sequences of chunks called '''physical extents''' (PEs).  Some volume managers (such as that in HP-UX and Linux) have PEs of a uniform size; others (such as that in [[VERITAS Volume Manager|Veritas]]) have variably-sized PEs that can be split and merged at will.

Normally, PEs simply map one-to-one to '''logical extents''' (LEs).   With mirroring, multiple PEs map to each LE.  These PEs are drawn from a '''physical volume group''' (PVG), a set of same-sized PVs which act similarly to hard disks in a RAID1 array.  PVGs are usually laid out so that they reside on different [[hard disk|disks]] and/or [[computer bus|data buses]] for maximum redundancy.

The system pools LEs into a ''volume group'' (VG).  The pooled LEs can then be concatenated together into virtual disk partitions called '''logical volumes''' or [[Logical volume|LVs]].  Systems can use LVs as raw [[block device]]s just like disk partitions: creating mountable [[file system]]s on them, or using them as [[virtual memory|swap]] storage.

Striped LVs allocate each successive LE from a different PV;  depending on the size of the LE, this can improve performance on large sequential reads by bringing to bear the combined read-throughput of multiple PVs.   

Administrators can grow LVs (by concatenating more LEs) or shrink them (by returning LEs to the pool).  The concatenated LEs do not have to be contiguous.  This allows LVs to grow without having to move already-allocated LEs.  Some volume managers allow the re-sizing of LVs in either direction while online.  Changing the size of the LV does not necessarily change the size of a [[file system|filesystem]] on it; it merely changes the size of its containing space.  A file system that can be resized online is recommended in that it allows the system to adjust its storage on-the-fly without interrupting applications.

PVs and LVs cannot be shared between or span different VGs (although some volume managers may allow moving them at will between VGs on the same host).  This allows administrators conveniently to bring VGs online, to take them offline or to move them between host systems as a single administrative unit.

VGs can grow their storage pool by absorbing new PVs or shrink by retracting from PVs.  This may involve moving already-allocated LEs out of the PV.  Most volume managers can perform this movement online; if the underlying hardware is hot-pluggable this allows engineers to upgrade or replace storage without system downtime.

==Snapshots==
Some volume managers also implement '''[[snapshot (computer storage)|snapshots]]''' by applying [[copy-on-write]] to each LE.  In this scheme, the volume manager will copy the LE to a ''copy-on-write table'' just before it is written to.  This preserves an old version of the LVâthe snapshotâwhich systems can later reconstruct by overlaying the copy-on-write table atop the current LV.  Read-write snapshots are '''branching snapshots''' because they implicitly allow diverging versions of an LV.

Snapshots can be useful for backing up self-consistent versions of volatile data like table files from a busy database, or for rolling back large changes (such as an operating system upgrade) in a single operation.  Some [[Linux]]-based [[Live CD]] systems also use snapshots to simulate read-write access on a read-only [[compact disc]].

== Implementations ==

{| class=&quot;wikitable sortable&quot;
! Vendor
! Introduced in
! Volume manager
! Allocate anywhere&lt;ref&gt;Denotes whether the volume manager allows LVs to grow and span onto any PV in the VG.&lt;/ref&gt;
! Snapshots
! [[RAID&amp;nbsp;0]]
! [[RAID&amp;nbsp;1]]
! [[RAID&amp;nbsp;5]]
! [[RAID&amp;nbsp;10]]
! Notes
|-
| [[IBM]]
| [[AIX operating system|AIX]] 3.0 (1989) 
| [[Logical Volume Manager (AIX)|Logical Volume Manager]]
| {{yes}}
| {{no}}&lt;ref&gt;Does not have a copy-on-write snapshot mechanism; creates snapshots by freezing one volume of a mirror pair.&lt;/ref&gt;
| {{yes}}
| {{yes}}
| {{no}}
| {{yes}}&lt;ref&gt;AIX 5.1&lt;/ref&gt;
|&lt;ref&gt;Refers to PEs as PPs (physical partitions), and to LEs as LPs (logical partitions).&lt;/ref&gt;
|-
| [[Hewlett-Packard]]
| [[HP-UX]] 9.0
| HP Logical Volume Manager
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{no}}
| {{yes}}
|
|-
|
| [[FreeBSD]]
| [[Vinum volume manager|Vinum Volume Manager]]
| {{yes}}
| {{no}}
| {{yes}}
| {{yes}}
| {{yes}}
|
|&lt;ref&gt;FreeBSD from version 7.0 supports ZFS volume Manager (with some limitations): [http://wiki.freebsd.org/ZFS ZFS - FreeBSD Wiki].&lt;/ref&gt;
|-
|
| [[NetBSD]]
| [[Logical volume manager|Logical Volume Manager]]
| {{yes}}
| {{no}}
| {{yes}}
| {{yes}}
| {{no}}&lt;ref&gt;There is no need to support raid5 in LVM because of NetBSD superior Raidframe subsystem.&lt;/ref&gt;
| {{no}}
|&lt;ref&gt;NetBSD from version 6.0 supports ZFS volume Manager and its own re-implementation of Linux LVM. Re-implementation is based on a BSD licensed device-mapper driver and uses a port of Linux lvm tools as the userspace part of lvm. The version of ZFS included in NetBSD 6.0 is in development.&lt;/ref&gt;
|-
|
| [[Linux]] 2.2
| [[Logical Volume Manager (Linux)|Logical Volume Manager]]
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{no}}
|
|
|-
|
| [[Linux]] 2.4
| [[Enterprise Volume Management System]]
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
|
| 
|-
|
| [[Linux]] 2.6
| [[Logical Volume Manager (Linux)|Logical Volume Manager]]
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{no}}
|
| 
|-
| [[Silicon Graphics]]
| [[IRIX]] or [[Linux]]
| [[XVM Volume Manager]]
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
|
|
|-
| [[Sun Microsystems]]
| [[SunOS]]
| [[Solaris Volume Manager]] (was [[Solstice DiskSuite]]).
| {{no}}
| {{no}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
|&lt;ref&gt;Refers to PVs as volumes (which can be combined with RAID0, RAID1 or RAID5 primitives into larger volumes), to LVs as soft partitions (which are contiguous extents placeable anywhere on volumes, but which cannot span multiple volumes), and to VGs as disk sets.&lt;/ref&gt;
|-
| [[Sun Microsystems]]
| [[Solaris 10]]
| [[ZFS]]
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
|
|- 
| [[Veritas Software|Veritas]]&lt;ref&gt;Third-party product; available for Windows and many [[Unix-like]] OSes.&lt;/ref&gt;
| Cross-OS
| [[Veritas Volume Manager]] (VxVM)
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
| {{yes}}
|&lt;ref&gt;Refers to LVs as ''volumes'', to VGs as ''disk groups''; has variably-sized PEs called ''subdisks'' and LEs called ''plexes''.&lt;/ref&gt;
|-
| [[Microsoft]]
| [[Windows 2000]] and later NT-based operating systems
| [[Logical Disk Manager]]
| {{Yes}}
| {{yes}}&lt;ref name=Shadowcopy&gt;[[Windows Server 2003]] and later&lt;/ref&gt;
| {{yes}}
| {{yes}}
| {{yes}}
| {{no}}
|&lt;ref&gt;Does not have a concept of PEs or LEs; can only RAID0, RAID1, RAID5 or concatenate disk partitions into larger volumes; file systems must span whole volumes.&lt;/ref&gt;
|}
&lt;!--
; [[OS/2]]
: Logical Volume Manager (OS/2 4.5 onwards, including [[eComStation]]).
: [[Zettabyte File System|ZFS]] (Solaris 10 onwards)
:: Actually a file system, but has its own volume-management layer.
--&gt;

== Disadvantages ==

* The levels of indirection that volume managers introduce can complicate the boot process and make [[disaster recovery]] difficult, especially when the base operating-system and other essential tools are themselves on an LV.
* Logical volumes can suffer from [[Fragmentation (computer)#external fragmentation|external fragmentation]] when the underlying storage devices do not allocate their PEs contiguously.  This can reduce I/O performance on slow-seeking media (such as magnetic disks), which have to seek over the gaps between extents during large sequential reads or writes.  Volume managers which use fixed-size PEs, however, typically make PEs relatively large (a default of 4MB on the Linux LVM, for example) in order to [[amortization|amortize]] the cost of these seeks.

== Notes ==

{{reflist|2}}

== References ==

* {{citation|first = AJ|last = Lewis|title = Logical Volume Manager HOWTO|url = http://tldp.org/HOWTO/LVM-HOWTO}}.
* {{citation|title = HP-UX 11: lvm(7) manual page|url = http://docs.hp.com/en/B2355-90684/lvm.7.html|publisher = Hewlett-Packard|year = 1996}}.
* {{citation|first1 = Laurent|last1 = Vanel|first2 = Ronald|last2 = van der Knaap|year = 2000|url = http://www.redbooks.ibm.com/redbooks/pdfs/sg245432.pdf|title = AIX Logical Volume Manager from A to Z: Introduction and Concepts|publisher = [[IBM Redbooks]]}}.
* {{citation|title = Veritas Volume Manager 3.1 Administrator's Guide|url = http://docs.hp.com/en/B7961-90018/B7961-90018.pdf|publisher = Hewlett-Packard|year = 2001}}.
* {{citation|title = XVM Volume Manager Administration Guide| url = http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=linux&amp;db=bks&amp;fname=/SGI_Admin/XVM_AG|publisher = Silicon Graphics|year = 1999}}.
* {{citation|title = Solaris Volume Manager Administration Guide|url = http://docsun.cites.uiuc.edu/sun_docs/C/solaris_9/SUNWaadm/LOGVOLMGRADMIN/toc.html|publisher = Sun Microsystems|year = 2003}}.
* {{citation|name=Shadowcopy|title = Comparison matrix of Windows LDM and Veritas Volume Manager|url = http://eval.veritas.com/mktginfo/products/White_Papers/Storage_Server_Management/sfw41-ldm-comparison-matrix-paper.pdf|publisher=Symantec Corporation|year=2003}}

== External links ==

*[http://www.linuxnix.com/2009/04/logical-volume-manager-lvm-in-redhat.html A video article on how to create LVMs in Linux]

[[Category:Computer storage]]

[[cs:Logical Volume Management]]
[[de:Logical Volume Manager]]
[[es:Logical Volume Manager]]
[[fr:Gestion par volumes logiques]]
[[it:Gestore logico dei volumi]]
[[he:Logical volume management]]
[[ja:è«çããªã¥ã¼ã ããã¼ã¸ã£]]
[[pl:LVM]]
[[ru:LVM]]
[[simple:Logical volume management]]
[[fi:Looginen taltiohallinta]]
[[uk:ÐÐ¾Ð³ÑÑÐ½Ð¸Ð¹ ÑÐ¾Ð¼]]
[[zh:éè¼¯æ²è»¸ç®¡ç]]</rev></revisions></page></pages></query></api>
